<!doctype HTML>
<html>
<script src = "../libs/build/aframe-master.min.js">
</script>
<script src = "../libs/build/aframe-ar.min.js">
</script>
<script src = "../libs/build/aframe-extras.loaders.min.js"></script>
</script>

<script>ARjs.Context.baseURL="../"</script>

<script>
  AFRAME.registerComponent("refresh",{
                             init: function(){
                               
                               const aEntity = this.el
                               const rootEntity = document.querySelector("#rootentity")
                               
                               aEntity.addEventListener('click', function(){
                                 if (aEntity) {
                                   rootEntity.setAttribute('visible', false)
                                   setTimeout(function(){}, 1000)
                                   rootEntity.setAttribute('visible', true)
                                   setTimeout(function(){}, 1000)
                                 }
                               })
                             }
                           })
                         
</script>

 <body stryle = 'margin : 0px; overflow: hidden;'>
    <a-scene id="ascene" embedded arjs="sourceType: webcam; debugUIEnabled: false" renderer = "sortObjects: true;">
        <a-marker type="pattern" preset="custom" url="https://raw.githubusercontent.com/stakanich/AR-App-Example-AR.js/master/data/patterns/pattern-monster.patt">

           <a-entity  id="rootentity" rotation="90 0 0"
                     animation__click="property: visible; from: false; to: true; dur: 100; startEvents: refreshclicked">
             
              <a-entity rotation="0 0 0"
                        animation="property: rotation; from: 0 0 315; to: 0 345 660; loop: true; dur: 25000"
                        >
                        
                        <a-entity position="-1 0 0" geometry="primitive: sphere; radius: 0.2"
                        material="metalness: 1; color: blue"
                        animation__click_color="property: components.material.material.color; dir: alternate; type: color; to: red; startEvents: click; dur: 3000"
                        animation__click_visible="property: visible; from: true; to: false; startEvents: click; dur: 100; delay: 3000">
                        </a-entity>

              </a-entity>
            
              <a-entity rotation="0 0 0"
                        animation="property: rotation; from: 0 0 30; to: 0 0 385; loop: true; dur: 20000">
                        
                        <a-entity rotation="0 0 0"
                        animation="property: rotation; from: 0 0 30; to: 0 0 390; loop: true; dur: 15000">
                        
                          <a-entity position="1.5 0 0" geometry="primitive: sphere; radius: 0.3"
                          material="metalness: 0; color: red"
                          animation__click_color="property: components.material.material.color; type: color; dir: alternate; to: green; startEvents: click; dur: 3000"
                          animation__click_visible="property: visible; from: true; to: false; startEvents: click; dur: 100; delay: 3000">
                          </a-entity>

                        </a-entity>

              </a-entity>
            
              <a-entity rotation="0 0 0"
                        animation="property: rotation; from: 0 0 0; to: 0 355 0; loop: true; dur: 18000">
                        
                        <a-entity rotation="0 0 0"
                        animation="property: position; from: 0 0 0; to: 2 0 0; loop: true; dur: 3000; dir: alternate">
                        
                          <a-entity position="1.5 0 0" geometry="primitive: sphere; radius: 0.3"
                          material="metalness: 0.3; color: yellow"
                          animation__click_color="property: components.material.material.color; type: color; dir: alternate; to: blue; startEvents: click; dur: 3000"
                          animation__click_visible="property: visible; from: true; to: false; startEvents: click; dur: 100; delay: 3000">
                          
                             <a-entity animation="property: rotation; from: 0 0 0; to: 0 355 0; loop: true; dur: 17000">
                               <a-entity position="0.5 0 0 " geometry="primitive: sphere; radius: 0.1"
                                 material="metalness: 0.3; color: green"
                                 animation__click_color="property: components.material.material.color; type: color; dir: alternate; to: yellow; startEvents: click; dur: 3000"
                                 animation__click_visible="property: visible; from: true; to: false; startEvents: click; dur: 100; delay: 3000">
                               </a-entity>
                             </a-entity>
                           
                             <a-entity animation="property: rotation; from: 0 0 0; to: 0 355 0; loop: true; dur: 10000; dir: reverse">
                               <a-entity position="-0.7 0 0 " geometry="primitive: sphere; radius: 0.15"
                                 material="metalness: 0.7; color: blue"
                                 animation__click_color="property: components.material.material.color; type: color; dir: alternate; to: green; startEvents: click; dur: 3000"
                                 animation__click_visible="property: visible; from: true; to: false; startEvents: click; dur: 100; delay: 3000">
                               </a-entity>
                             </a-entity>
                           
                          </a-entity>

                        </a-entity>

              </a-entity>

              <a-entity geometry="primitive: box; width: 0.3; height: 0.3; depth: 0.3"
                        material="color: white; opacity: 0.7; transparent: true"
                        position="2"
                        refresh>
              </a-entity>
            
           </a-entity>
        </a-marker>
      <!--<a-entity camera><a-cursor></a-cursor></a-entity>-->
      <a-entity camera><a-cursor></a-cursor></a-entity>
    </a-scene>
  </body>
</html>
