<!doctype HTML>
<html>
<script src = "./libs/build/aframe-master.min.js">
</script>
<script src = "./libs/build/aframe-ar.min.js">
</script>
<script src = "./libs/build/aframe-extras.loaders.min.js"></script>
</script>



<script>
  AFRAME.registerComponent("shipclicked",{
                             init: function(){
                               const animatedMarker = document.querySelector("#shipMarker");
                               const aEntity = document.querySelector("#shipModel");
                               
                               animatedMarker.addEventListener('click', function(ev, target){
                                 const intersectedElement = ev && ev.detail && ev.detail.intersectedEl;
                                 alert('clicked')
                                 if (aEntity) {
                                   let shipPlane = document.querySelector("#shipPlane")
                                   alert('aentity is good')
                                   if (shipPlane.getAttribute('visible') == false)
                                   {
                                     shipPlane.object3D.visible = true;
                                     alert('show')
                                   }
                                   else
                                   {
                                     shipPlane.object3D.visible = false;
                                     alert('hide')
                                   }
                                 }
                               })
                             }
                           })
                         
</script>

  <body stryle = 'margin : 0px; overflow: hidden;'>
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false" renderer = "sortObjects: true;">
        <a-marker type="pattern" preset="custom" url="https://raw.githubusercontent.com/stakanich/AR-App-Example-AR.js/master/data/patterns/pattern-monster.patt">

           <a-entity
             gltf-model="src: url(./data/models/monster/Monster.gltf);"
             rotation="-90 0 0"
             scale="0.02 0.02 0.02"
             animation-mixer>
           </a-entity>
        </a-marker>
      
        <a-marker shipclicked emitevents="true" cursor="color: yellow; fuse: true; rayOrigin: mouse" id="shipMarker" type="pattern" preset="custom" url="https://raw.githubusercontent.com/stakanich/AR-App-Example-AR.js/master/data/patterns/pattern-ship.patt">
          <a-entity id = 'shipPlane' 
                    geometry="primitive: plane; height: 0.5; width: 0.5"
                    position="0.5 0 0"
                    material="src: url(./data/models/ship/shipText.png); side: double"
                    rotation="-90 0 0"
                    visible="true">
          </a-entity>
          
          <a-entity id="shipModel"
                    gltf-model="src: url(./data/models/ship/ship_light.gltf);"
                    rotation="0 90 270"
                    scale="0.1 0.1 0.1">
          </a-entity>
          
        </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
