<!doctype HTML>
<html>
<script src = "./libs/build/aframe-master.min.js">
</script>
<script src = "./libs/build/aframe-ar.min.js">
</script>
<script src = "./libs/build/aframe-extras.loaders.min.js"></script>
</script>



<script>
  AFRAME.registerComponent("shipClicked",{
                             init: function(){
                               const animatedMarker = document.querySelector("#shipMarker");
                               const aEntity = document.querySelector("#shipModel");
                               
                               this.el.addEventListener("click", (e) => {
                                 const intersectedElement = ev && ev.detail && ev.detail.intersectedEl;
                                 if (aEntity && intersectedElement === aEntity) {
                                   let shipPlane = document.querySelector("#shipPlane")
                                   shipPlane.setAttribute('visible', !shipPlane.getAttribute('visible'))
                                 }
                               }
                             }
                           }
</script>

  <body stryle = 'margin : 0px; overflow: hidden;'>
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false" renderer = "sortObjects: true;">
        <a-marker type="pattern" preset="custom" url="https://raw.githubusercontent.com/stakanich/AR-App-Example-AR.js/master/data/patterns/pattern-monster.patt">

           <a-entity
             gltf-model="src: url(./data/models/monster/Monster.gltf);"
             rotation="-90 0 0"
             scale="0.02 0.02 0.02"
             animation-mixer>
           </a-entity>
        </a-marker>
      
        <a-marker shipClicked emitevents="true" cursor="rayOrigin: mouse" id="shipMarker" type="pattern" preset="custom" url="https://raw.githubusercontent.com/stakanich/AR-App-Example-AR.js/master/data/patterns/pattern-ship.patt">
          <a-entity id = 'shipPlane' 
                    geometry="primitive: plane; height 10; width 10;" 
                    material="src: url(./data/models/ship/shipText.png);"
                    visible="false">
          </a-entity>
          
          <a-entity id="shipModel"
                    gltf-model="src: url(./data/models/ship/ship-light.gltf);"
                    rotation="-90 0 0"
                    scale="0.5 0.5 0.5">
          </a-entity>
          
        </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
